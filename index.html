<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>【特典】“後悔しない”ゴルフ練習場選び インタラクティブガイド</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Noto Sans JP', sans-serif; background-color: #f1f5f9; padding-bottom: 80px; }
        div[id^="skill-"] { scroll-margin-top: 1.5rem; }
        .tab-link {
            background-color: #ffffff; color: #334155; font-weight: 500; text-align: center;
            padding: 0.75rem; border-radius: 0.5rem; box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            transition: all 0.2s ease-in-out; cursor: pointer; border: 1px solid #e2e8f0;
            display: flex; align-items: center; justify-content: center; height: 100%;
        }
        .tab-link.active {
            background-color: #16a34a; color: #ffffff; border-color: #16a34a;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transform: translateY(-2px);
        }
        @media (hover: hover) {
            .tab-link:not(.active):hover {
                background-color: #f8fafc; border-color: #cbd5e1; transform: translateY(-2px);
            }
        }
        #bottomNav {
            transform: translateY(100%); transition: transform 0.3s ease-in-out;
            background-color: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
        }
        #bottomNav.visible { transform: translateY(0); }
        .bottom-tab-link {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: #64748b; padding: 0.25rem; width: 60px; height: 56px;
            transition: color 0.2s ease-in-out;
        }
        .bottom-tab-link.active { color: #16a34a; }
        .bottom-tab-link > span { font-size: 0.65rem; margin-top: 2px; text-align: center; line-height: 1.2; }

        .input-form-item {
            display: flex; flex-direction: column; gap: 0.25rem;
            padding: 0.75rem 0; border-bottom: 1px solid #e2e8f0;
        }
        .input-form-item:last-child { border-bottom: none; }
        .input-form-item label { font-weight: 600; color: #1e293b; }
        .input-form-item input[type="text"], .input-form-item textarea {
            width: 100%; padding: 0.5rem; border: 1px solid #cbd5e1;
            border-radius: 0.375rem; font-size: 1rem;
        }
        .content-section { display: none; }
        .content-section.active { display: block; }
        
        /* ▼▼▼ PDF出力用のスタイル ▼▼▼ */
        @media print {
            /* 印刷時に、印刷対象外のものを全て非表示にする */
            body * {
                visibility: hidden;
            }
            /* 印刷対象のエリアと、その中の要素だけを表示状態に戻す */
            .printable-area, .printable-area * {
                visibility: visible;
            }
            /* 印刷対象エリアをページの左上に配置する */
            .printable-area {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
            /* 印刷時にはボタン類を非表示にする */
            .printable-area .save-checklist-btn,
            .printable-area .pdf-export-btn,
            .printable-area .save-feedback {
                display: none;
            }
        }
        /* ▲▲▲ ここまでを追加 ▲▲▲ */
    </style>
</head>
<body class="text-slate-700">

    <div class="container mx-auto px-4 py-8 max-w-4xl">
        
        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-800 mb-2">“後悔しない”<br class="sm:hidden">ゴルフ練習場選び</h1>
            <p class="text-green-700 font-semibold">インタラクティブ・チェックガイド</p>
        </header>

        <nav class="mb-8">
            <ul class="grid grid-cols-3 md:grid-cols-6 gap-2 md:gap-4">
                <li><a data-tab="welcome" class="tab-link active">はじめに</a></li>
                <li><a data-tab="hp-check" class="tab-link">HPチェック</a></li>
                <li><a data-tab="list-view" class="tab-link">練習場一覧</a></li>
                <li><a data-tab="skill-check" class="tab-link">習熟度別</a></li>
                <li><a data-tab="my-report" class="tab-link">マイカルテ</a></li>
                <li><a data-tab="history-view" class="tab-link">診断履歴</a></li>
            </ul>
        </nav>

        <main>
            <section id="welcome" class="content-section active">
                <div class="bg-white p-6 md:p-8 rounded-lg shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">ようこそ、賢いゴルファーの練習場選びへ！</h2>
                    <p class="text-right -mt-4 mb-6"><a href="https://note.com/seki_golf_39" target="_blank" class="text-sm text-amber-600 font-semibold underline hover:text-amber-700">by 関＠初心者向けゴルフ施設レビュアー</a></p>
                    <p class="mb-4">このツールは、<strong>関＠初心者向けゴルフ施設レビュアー</strong>のnote記事シリーズ「初心者必見！ゴルフ練習場選び完全ガイド」を読んでくださったあなたのための、特別な特典です。</p>
                    <p>練習場選びは、あなたのゴルフライフを大きく左右する重要な選択。しかし、情報が多すぎて「どこを、どう見ればいいの？」と迷ってしまいますよね。</p>
                    <p>このガイドを使えば、</p>
                    <ul class="list-disc list-inside my-4 space-y-2">
                        <li>練習場のHPから、見るべきポイントを効率よくチェックできます。</li>
                        <li>あなたのゴルフのレベルに合った、最適なチェックシートが見つかります。</li>
                        <li>そして、あなただけの「理想の練習場カルテ」を作成し、自分にとって本当に大切な基準を明確にできます。</li>
                    </ul>
                    <p>さあ、上のタブから各項目を探求し、あなたにとって最高の練習環境を見つけ出す旅を始めましょう！</p>
                </div>
            </section>
            
            <section id="hp-check" class="content-section">
                <div class="bg-white p-6 md:p-8 rounded-lg shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">練習場ホームページ：これだけは絶対チェック！超厳選リスト</h2>
                    <p class="text-right -mt-4 mb-6"><a href="https://note.com/seki_golf_39" target="_blank" class="text-sm text-amber-600 font-semibold underline hover:text-amber-700">by 関＠初心者向けゴルフ施設レビュアー</a></p>
                    <p class="mb-6 text-slate-600">練習場のHP、情報が多すぎて迷いますよね？まずはこの「2大カテゴリー」に絞ってチェックすれば、大きな失敗は防げます！</p>
                    <div class="mb-8">
                        <h3 class="text-xl font-semibold text-green-700 mb-3 border-b-2 border-green-200 pb-2">カテゴリー1：【お財布事情】気になる料金まわり</h3>
                        <div class="space-y-3 text-sm">
                            <p>⛳️ <strong>基本のボール代は？</strong><br class="sm:hidden"><span class="text-xs text-slate-500 ml-5 sm:ml-2">(1球いくら？ 打ち放題はある？)</span></p>
                            <p>⛳️ <strong>入場料はかかる？</strong></p>
                            <p>⛳️ <strong>お得な割引はある？</strong><br class="sm:hidden"><span class="text-xs text-slate-500 ml-5 sm:ml-2">(女性割引、特定のカード割引、時間帯割引など)</span></p>
                            <p>⛳️ <strong>支払い方法は？</strong><br class="sm:hidden"><span class="text-xs text-slate-500 ml-5 sm:ml-2">(現金？ カード？ プリペイドカードの初回金額は？)</span></p>
                            <p class="text-xs text-slate-500 italic mt-2">→ HPの「料金案内」「ご利用システム」などを重点的にチェック！</p>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-green-700 mb-3 border-b-2 border-green-200 pb-2">カテゴリー2：【練習できること】やりたい練習ができるか</h3>
                         <div class="space-y-3 text-sm">
                            <p>⛳️ <strong>アプローチ練習</strong>はできそう？<br class="sm:hidden"><span class="text-xs text-slate-500 ml-5 sm:ml-2">(専用エリア、バンカーの有無など)</span></p>
                            <p>⛳️ <strong>パター練習</strong>はできそう？<br class="sm:hidden"><span class="text-xs text-slate-500 ml-5 sm:ml-2">(専用グリーン、マットの有無など)</span></p>
                            <p>⛳️ <strong>噂の「弾道測定器」はある？</strong><br class="sm:hidden"><span class="text-xs text-slate-500 ml-5 sm:ml-2">(トップトレーサーなど。無料か有料かもチェック！)</span></p>
                            <p>⛳️ <strong>初心者でも安心な打席</strong>はありそう？<br class="sm:hidden"><span class="text-xs text-slate-500 ml-5 sm:ml-2">(仕切りがある、専用レーンなど)</span></p>
                            <p class="text-xs text-slate-500 italic mt-2">→ HPの「施設案内」「フロアガイド」などで設備をチェック！</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="list-view" class="content-section">
                <div class="bg-white p-6 md:p-8 rounded-lg shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">練習場一覧＆絞り込み検索</h2>
                    <p class="text-right -mt-4 mb-6"><a href="https://note.com/seki_golf_39" target="_blank" class="text-sm text-amber-600 font-semibold underline hover:text-amber-700">by 関＠初心者向けゴルフ施設レビュアー</a></p>
                    
                    <div id="filter-controls" class="p-4 bg-slate-50 rounded-lg mb-6 space-y-2">
                        <p class="font-semibold">設備で絞り込む:</p>
                        <div class="grid grid-cols-2 sm:grid-cols-4 gap-x-4 gap-y-2">
                            <label class="flex items-center space-x-2"><input type="checkbox" name="feature" value="hasTracer"><span>📡 弾道測定器</span></label>
                            <label class="flex items-center space-x-2"><input type="checkbox" name="feature" value="hasApproach"><span>⛳️ アプローチ</span></label>
                            <label class="flex items-center space-x-2"><input type="checkbox" name="feature" value="hasBunker"><span>🕳️ バンカー</span></label>
                            <label class="flex items-center space-x-2"><input type="checkbox" name="feature" value="hasPutter"><span>🏌️ パター</span></label>
                        </div>
                    </div>

                    <div id="location-list" class="space-y-4">
                    </div>
                </div>
            </section>

            <section id="skill-check" class="content-section">
                <div class="bg-white p-6 md:p-8 rounded-lg shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">習熟度別チェックシート</h2>
                    <p class="text-right -mt-4 mb-6"><a href="https://note.com/seki_golf_39" target="_blank" class="text-sm text-amber-600 font-semibold underline hover:text-amber-700">by 関＠初心者向けゴルフ施設レビュアー</a></p>
                    <p class="mb-6 text-slate-600">あなたのゴルフのレベルに合わせて、最適なチェックシートを選んで活用しよう！</p>
                    
                    <div class="grid grid-cols-3 gap-2 md:gap-4 mb-8">
                        <a href="#skill-1" class="page-scroll-link bg-green-100 text-green-800 text-center text-sm md:text-base font-bold p-2 rounded-lg hover:bg-green-200 transition">種類①<br>超入門</a>
                        <a href="#skill-2" class="page-scroll-link bg-green-100 text-green-800 text-center text-sm md:text-base font-bold p-2 rounded-lg hover:bg-green-200 transition">種類②<br>脱・初心者</a>
                        <a href="#skill-3" class="page-scroll-link bg-green-100 text-green-800 text-center text-sm md:text-base font-bold p-2 rounded-lg hover:bg-green-200 transition">種類③<br>上級者</a>
                    </div>

                    <div class="space-y-8">
                        <div id="skill-1">
                            <h3 class="text-xl font-semibold text-green-700 mb-2">種類①：【超入門！】はじめての練習場選び 超シンプルチェックシート</h3>
                            <p class="text-sm text-slate-500 mb-3">これから初めて練習場に行く、数回しか行ったことがない方向け。不安をなくし、「まずは行ってみる！」を応援します。</p>
                            <div class="bg-slate-50 p-4 rounded-md">
                                <div class="input-form-item"><label for="s1_1">⛳️ 練習場名</label><input type="text" id="s1_1"></div>
                                <div class="input-form-item"><label for="s1_2">📍 場所はどこらへん？（家から何分くらい？）</label><input type="text" id="s1_2"></div>
                                <div class="input-form-item"><label for="s1_3">⏰ 今日（または行きたい日）やってる？（営業時間OK？）</label><input type="text" id="s1_3"></div>
                                <div class="input-form-item"><label for="s1_4">👋 手ぶらでも大丈夫そう？（クラブとか借りれる？）</label><input type="text" id="s1_4"></div>
                                <div class="input-form-item"><label for="s1_5">💰 料金はどんな感じ？（HPで見て、1球いくら位？ なんとなくでOK！）</label><input type="text" id="s1_5"></div>
                                <div class="input-form-item"><label for="s1_6">😊 雰囲気はどうかな？（HPの写真を見て、初心者でも優しそう？）</label><input type="text" id="s1_6"></div>
                                <div class="input-form-item"><label for="s1_7">🌟 「行ってみたい！」ワクワク度（5段階）</label><input type="text" id="s1_7"></div>
                                
                                <div class="mt-4 text-right">
                                    <span class="save-feedback text-green-600 font-semibold mr-2" style="display: none;">保存しました！</span>
                                    <button data-checklist-id="skill-1" class="save-checklist-btn bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700 transition">このシートの内容を保存</button>
                                    <button data-checklist-id="skill-1" class="pdf-export-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition">PDFで出力</button>
                                </div>
                            </div>
                        </div>
                        
                        <div id="skill-2">
                            <h3 class="text-xl font-semibold text-green-700 mb-2">種類②：【脱・初心者！】“自分に合う”を見つける 練習場比較チェックシート</h3>
                             <p class="text-sm text-slate-500 mb-3">何回か練習場に行ったことがあり、もっと自分に合う場所を探したい方向け。複数の練習場を比較検討するのに最適です。</p>
                             <div class="bg-slate-50 p-4 rounded-md">
                                <div class="input-form-item"><label for="s2_1">🎯 今日の練習目的／この練習場に期待すること</label><textarea id="s2_1" rows="2"></textarea></div>
                                <div class="input-form-item"><label for="s2_2">🚗 アクセス＆基本情報（家からの所要時間、駐車場、営業時間）</label><textarea id="s2_2" rows="2"></textarea></div>
                                <div class="input-form-item"><label for="s2_3">💸 料金チェック！（100球打った時の総額、打ち放題プラン、使える割引）</label><textarea id="s2_3" rows="2"></textarea></div>
                                <div class="input-form-item"><label for="s2_4">🏌️‍♂️ 練習設備チェック！（打席の雰囲気、弾道測定器、アプローチ、パター、初心者への配慮）</label><textarea id="s2_4" rows="3"></textarea></div>
                                <div class="input-form-item"><label for="s2_5">☕️ その他（レンタル、休憩スペース、スタッフの雰囲気、一番のウリは？）</label><textarea id="s2_5" rows="2"></textarea></div>
                                <div class="input-form-item"><label for="s2_6">🔁 総合的な「また来たい度」（5段階）</label><input type="text" id="s2_6"></div>

                                <div class="mt-4 text-right">
                                    <span class="save-feedback text-green-600 font-semibold mr-2" style="display: none;">保存しました！</span>
                                    <button data-checklist-id="skill-2" class="save-checklist-btn bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700 transition">このシートの内容を保存</button>
                                    <button data-checklist-id="skill-2" class="pdf-export-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition">PDFで出力</button>
                                </div>
                             </div>
                        </div>
                        
                        <div id="skill-3">
                            <h3 class="text-xl font-semibold text-green-700 mb-2">種類③：【目指せ上級者！】練習環境を徹底分析 本格活用チェックシート</h3>
                            <p class="text-sm text-slate-500 mb-3">本気で上達したい、練習環境を戦略的に選びたい方向け。各練習場の長所・短所を詳細に分析します。</p>
                            <div class="bg-slate-50 p-4 rounded-md">
                                <div class="input-form-item"><label for="s3_1">📈 料金体系分析（マイ練習パターンでのコストシミュレーション）</label><textarea id="s3_1" rows="2"></textarea></div>
                                <div class="input-form-item"><label for="s3_2">🎯 ドライビングレンジ環境評価（打席、マット、ティー、ボール、ターゲット、弾道測定器の詳細）</label><textarea id="s3_2" rows="3"></textarea></div>
                                <div class="input-form-item"><label for="s3_3">⛳️ ショートゲーム練習環境評価（アプローチ練習場、パターグリーンの詳細）</label><textarea id="s3_3" rows="3"></textarea></div>
                                <div class="input-form-item"><label for="s3_4">🏢 その他施設・サービス評価（クラブハウス、ショップ、工房、レッスン、スタッフ対応など）</label><textarea id="s3_4" rows="3"></textarea></div>
                                <div class="input-form-item"><label for="s3_5">🧠 総合評価と戦略的活用プラン（この練習場の強み・弱み、自分のスキル向上への活用法）</label><textarea id="s3_5" rows="3"></textarea></div>

                                <div class="mt-4 text-right">
                                    <span class="save-feedback text-green-600 font-semibold mr-2" style="display: none;">保存しました！</span>
                                    <button data-checklist-id="skill-3" class="save-checklist-btn bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700 transition">このシートの内容を保存</button>
                                    <button data-checklist-id="skill-3" class="pdf-export-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition">PDFで出力</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="my-report" class="content-section">
                <div class="bg-white p-6 md:p-8 rounded-lg shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">あなただけの「練習場選びカルテ」を作成しよう！</h2>
                    <p class="text-right -mt-4 mb-6"><a href="https://note.com/seki_golf_39" target="_blank" class="text-sm text-amber-600 font-semibold underline hover:text-amber-700">by 関＠初心者向けゴルフ施設レビュアー</a></p>
                    <p class="mb-6 text-slate-600">下の3つの質問に答えて、あなたにとって「理想の練習場」の条件を明確にしてみましょう。最後に生成される「あなたの練習場カルテ」をスクリーンショットすれば、今後の練習場選びの強力な「羅針盤」になります！</p>
                    <div class="space-y-8">
                        <div>
                            <label for="goal" class="block mb-2 text-lg font-medium text-slate-900"><span class="bg-green-600 text-white rounded-full px-3 py-1 mr-2">Q1</span>今のあなたの「一番の練習目的」は何ですか？</label>
                            <select id="goal" class="bg-slate-50 border border-slate-300 text-slate-900 text-base rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-3"><option selected value="">選択してください</option><option value="data">データを見ながら効率よく練習したい</option><option value="approach">アプローチやバンカーをとことん練習したい</option><option value="putter">パターを本気で上達させたい</option><option value="swing">とにかくたくさん打ち込みたい（スイング固め）</option><option value="trial">いろいろなクラブを試したい</option></select>
                        </div>
                        <div>
                            <label for="budget" class="block mb-2 text-lg font-medium text-slate-900"><span class="bg-green-600 text-white rounded-full px-3 py-1 mr-2">Q2</span>練習1回あたりの「理想の予算感」は？</label>
                            <select id="budget" class="bg-slate-50 border border-slate-300 text-slate-900 text-base rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-3"><option selected value="">選択してください</option><option value="cost">コスト最優先！できるだけ安く！</option><option value="balance">安さも質も！コスパ重視</option><option value="quality">質のためなら、多少高くても気にしない</option></select>
                        </div>
                        <div>
                            <label for="priority" class="block mb-2 text-lg font-medium text-slate-900"><span class="bg-green-600 text-white rounded-full px-3 py-1 mr-2">Q3</span>練習場選びで「絶対に譲れない」雰囲気は？</label>
                            <select id="priority" class="bg-slate-50 border border-slate-300 text-slate-900 text-base rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-3"><option selected value="">選択してください</option><option value="focus">自分のペースで黙々と集中したい</option><option value="community">アットホームな雰囲気・人との繋がり</option><option value="comfort">設備の綺麗さ・快適さ</option></select>
                        </div>
                    </div>
                    <div class="mt-10 text-center"><button id="generate-report" type="button" class="text-white bg-green-600 hover:bg-green-700 focus:ring-4 focus:ring-green-300 font-bold rounded-lg text-lg px-8 py-4 glow-button">カルテを生成する！</button></div>
                    <div id="report-output" class="mt-10 bg-amber-50 p-6 rounded-lg border-2 border-dashed border-amber-300" style="display: none;">
                        <h3 class="text-2xl font-bold text-amber-800 mb-4 text-center">📝 あなただけの練習場選びカルテ</h3>
                        <div class="space-y-4 text-slate-800">
                           <p><strong>【あなたの理想】</strong><br>「<span id="report-goal" class="font-semibold text-amber-900"></span>」を目標に、「<span id="report-budget" class="font-semibold text-amber-900"></span>」を重視しつつ、「<span id="report-priority" class="font-semibold text-amber-900"></span>」環境で練習したい。</p>
                           <div id="recommendation-container" class="mt-4 pt-4 border-t border-amber-200">
                               <h4 class="font-bold text-lg text-amber-900">診断結果：あなたにピッタリの練習場はここだ！</h4>
                               <div id="report-recommendation" class="mt-2 space-y-4"></div>
                           </div>
                           <p class="text-xs text-slate-500 mt-4">※この診断は、関の体験に基づいた<strong>滋賀県</strong>の練習場を参考にしています。</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="history-view" class="content-section">
                 <div class="bg-white p-6 md:p-8 rounded-lg shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">マイカルテ診断の履歴</h2>
                    <p class="text-right -mt-4 mb-6"><a href="https://note.com/seki_golf_39" target="_blank" class="text-sm text-amber-600 font-semibold underline hover:text-amber-700">by 関＠初心者向けゴルフ施設レビュアー</a></p>
                    <p class="mb-4 text-slate-600">過去に診断した結果をここから確認できます。あなたのゴルフに対する考え方の変化を見てみましょう。</p>
                    <div id="history-list" class="space-y-6">
                    </div>
                </div>
            </section>
        </main>
        <footer class="text-center mt-8 text-xs text-slate-400">
            <p>Created by <a href="https://note.com/seki_golf_39" target="_blank" class="underline hover:text-green-700"><strong>関＠初心者向けゴルフ施設レビュアー</strong></a> & Gemini</p>
        </footer>
    </div>

    <nav id="bottomNav" class="fixed bottom-0 left-0 right-0 border-t border-slate-200 z-40">
        <ul class="flex justify-around items-center max-w-4xl mx-auto h-16">
            <li><a data-tab="welcome" class="bottom-tab-link active"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg><span>はじめに</span></a></li>
            <li><a data-tab="list-view" class="bottom-tab-link"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M7 18h2V6H7v12zm4 0h2V6h-2v12zm-8 0h2V6H3v12zm12 0h2V6h-2v12zm4-18H1v18h22V0H23zm-2 16H3V2h18v14z"/></svg><span>練習場一覧</span></a></li>
            <li><a data-tab="skill-check" class="bottom-tab-link"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/></svg><span>習熟度別</span></a></li>
            <li><a data-tab="my-report" class="bottom-tab-link"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm-1-5h2v2h-2zm0-8h2v6h-2z"/></svg><span>マイカルテ</span></a></li>
            <li><a data-tab="history-view" class="bottom-tab-link"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.25 2.52.77-1.28-3.52-2.09V8z"/></svg><span>診断履歴</span></a></li>
        </ul>
    </nav>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- 要素の取得 ---
    const allTabLinks = document.querySelectorAll('[data-tab]');
    const sections = document.querySelectorAll('.content-section');
    const bottomNav = document.getElementById('bottomNav');
    const pageScrollLinks = document.querySelectorAll('.page-scroll-link');
    const checklistInputs = document.querySelectorAll('#skill-check input, #skill-check textarea');
    const locationListContainer = document.getElementById('location-list');
    const filterControls = document.getElementById('filter-controls');
    const historyListContainer = document.getElementById('history-list');

    // --- データ定義 ---
    const db = {
        ksp_hikone: { key: 'ksp_hikone', name: "KSP彦根", url: "https://note.com/seki_golf_39/n/nb5ea1ecefd55", hasTracer: true, hasApproach: false, hasBunker: false, hasPutter: true },
        '365_hikone': { key: '365_hikone', name: "365ゴルフクラブ 彦根", url: null, hasTracer: true, hasApproach: false, hasBunker: false, hasPutter: true },
        ksp_hopegaoka: { key: 'ksp_hopegaoka', name: "KSP希望ヶ丘", url: "https://note.com/seki_golf_39/n/n31741c0906db", hasTracer: true, hasApproach: true, hasBunker: true, hasPutter: true },
        riverside: { key: 'riverside', name: "リバーサイドジャンボゴルフ", url: "https://note.com/seki_golf_39/n/n08dd06e73210", hasTracer: false, hasApproach: true, hasBunker: true, hasPutter: true },
        sakura: { key: 'sakura', name: "さくらゴルフ倶楽部", url: "https://note.com/seki_golf_39/n/n759ba0e6cda6", hasTracer: false, hasApproach: true, hasBunker: true, hasPutter: false },
        '365_nagahama': { key: '365_nagahama', name: "365ゴルフクラブ ながはま", url: "https://note.com/seki_golf_39/n/n8352c6895ba7", hasTracer: true, hasApproach: true, hasBunker: false, hasPutter: true },
        greenpia: { key: 'greenpia', name: "グリーンピア近江八幡ゴルフ", url: "https://note.com/seki_golf_39/n/nb7380ee3708a", hasTracer: false, hasApproach: true, hasBunker: true, hasPutter: true }
    };
    const diagnosisLogic = {
        data:{cost:{focus:{result:[db.ksp_hikone],reason:"30分660円からのお得な打ち放題があり「コスト優先」に応えつつ、全打席トップトレーサー無料で「データ計測」が可能。各自が黙々と練習する雰囲気も「集中したい」あなたにピッタリです！"},community:{result:[db["365_hikone"]],reason:"「コスト優先」で「アットホーム」さを求めるならここ。店員さんも優しく、工房にはいつも多くの人が相談に訪れるなど、データ計測以外の人との繋がりも期待できます。"},comfort:{result:[db["365_hikone"],db.ksp_hikone],reason:"安さも綺麗さもならこの2つ。365彦根はオープンしたてで綺麗、KSP彦根もレンジ周りは非常に清潔感があります。どちらもトップトレーサー完備です！"}},balance:{focus:{result:[db["365_nagahama"],db["365_hikone"],db.ksp_hikone],reason:"「コスパ」と「質」、そして「集中できる環境」を求めるならこの3つ。どの練習場も集中しやすく、料金と設備のバランスが最高レベルです。"},community:{result:[db["365_hikone"]],reason:"「コスパ」と「アットホームさ」のバランスが良いのがここ。最新のデータ計測を楽しみつつ、親切な店員さんや工房に集まる人たちとの交流も魅力です。"},comfort:{result:[db["365_hikone"],db.ksp_hikone],reason:"安さと質の高さを両立し、かつ綺麗な環境で練習したいあなたへ。どちらも清潔感があり、トップトレーサーを快適に利用できます。"}},quality:{focus:{result:[db["365_nagahama"],db.ksp_hopegaoka],reason:"「質」を最優先するならこの2つ。365ながはまはショートコースも完備。KSP希望ヶ丘は料金が少し高めですが、その分、質の高い環境で黙々とデータと向き合えます。"},community:{result:[db["365_nagahama"]],reason:"「質」と「雰囲気」の両方を最高レベルで求めるならここ。最高の練習環境でスキルを磨きつつ、活気のある練習場で新しい出会いも期待できます。"},comfort:{result:[db["365_nagahama"],db["365_hikone"]],reason:"「質」と「快適さ」を極めるならこの2つ。365ながはまは全てが揃い、365彦根は有料の屋内パター練習場など、綺麗な環境で最高の練習ができます。"}}},approach:{cost:{focus:{result:[db.greenpia],reason:"「コスト最優先」でアプローチ練習ならここ。利用時間は短いですが、非常に安い料金で利用できます。平日など空いている時間なら集中できるはず。"},community:{result:[db.sakura],reason:"安くてアットホームな雰囲気でアプローチ練習がしたいならここが一番！親切な店員さんや他の利用者との交流も魅力です。"},comfort:{result:[db.sakura],reason:"料金の安さを考えると、ここのアプローチ練習場は十分に快適と言えるでしょう。金額と設備のバランスが良い選択です。"}},balance:{focus:{result:[db.sakura],reason:"「コスパ」と「質」を両立し、自分のペースで集中したいならここ。実践的なライから練習でき、上達に繋がります。"},community:{result:[db.sakura],reason:"料金と設備のバランスが良く、かつアットホームな雰囲気でアプローチ練習がしたいなら、ここが最適解です！"},comfort:{result:[db.riverside],reason:"「コスパ」も「快適さ」もならここ。年会費2,000円を払えば、300円で快適な会員限定アプローチ練習場が利用できます。"}},quality:{focus:{result:[db.riverside],reason:"「質」を求めるあなたには、会員しか入れないここのアプローチ練習場がおすすめ。人が少ない環境で最高の集中力を発揮できます。"},community:{result:[db.riverside],reason:"ハイクオリティな会員限定アプローチ練習場がありつつ、休憩スペースでは他のゴルファーとも交流できる、バランスの取れた練習場です。"},comfort:{result:[db["365_nagahama"]],reason:"「質」と「快適さ」を最高レベルで求めるならここ。併設のショートコースでの実践的なアプローチ練習は、まさに最高の環境です。"}}},putter:{cost:{default:{result:[db.riverside],reason:"「コスト最優先」でパターを練習したいなら、無料でこのクオリティのパター練習場を開放しているここが、まさに聖地です！"}},balance:{focus:{result:[db.ksp_hopegaoka],reason:"「コスパ」「質」「集中」を求めるならここ。レンジ利用者は、広くて質の良い屋内パター練習場が無料で使え、自分の練習に没頭できます。"},community:{result:[db.riverside],reason:"「コスパ」と「アットホームさ」のバランスが最も良いのがここ。無料パター練習場でコストを抑えつつ、人の温かみも感じられます。"},comfort:{result:[db.ksp_hikone],reason:"レンジ利用が前提ですが、トップトレーサーを楽しんだ後に、無料で使える綺麗なパター練習マットで調整、という流れは非常に「コスパ」が高いです。"}},quality:{focus:{result:[db["365_nagahama"]],reason:"「質」を最優先するなら、ここのショートコースのグリーンで実践的なパッティングを行うのが最強の選択肢です。"},community:{result:[db["365_nagahama"]],reason:"「質」と「雰囲気」の両方を満たすならここ。最高の練習環境でスキルを磨きつつ、活気のある練習場で新しい出会いも期待できます。"},comfort:{result:[db["365_hikone"]],reason:"「質」と「快適さ」を極めるなら、ここの有料屋内パター練習場がベスト。天候に左右されず、綺麗なプライベート空間で最高の練習ができます。"}}},swing:{cost:{focus:{result:[db.greenpia],reason:"「コスト最優先」で「集中したい」なら、割引を駆使すれば驚異的な安さでガンガン打ち込めます。平日など空いている時間を狙いましょう。"},community:{result:[db.sakura],reason:"「コスト最優先」で「アットホーム」な雰囲気、特に女性ならここの打ち放題が圧倒的におすすめです！"},comfort:{result:[db["365_hikone"]],reason:"最安クラスではありませんが、オープンしたてで非常に綺麗な環境で、コストを抑えつつ気持ちよく打ち込みたいならここがベストです。"}},balance:{focus:{result:[db.ksp_hikone],reason:"安くて集中できる環境で打ち込みたいならここ。トップトレーサーでデータを見ながらの打ち込みは、ただ打つ以上の価値があります。"},community:{result:[db.sakura],reason:"料金と雰囲気のバランスを考えるなら、やはりここ。人の繋がりを感じながら、楽しく打ち込めます。"},comfort:{result:[db["365_hikone"]],reason:"「コスパ」も「綺麗さ」も、ならここ。新しい施設で気持ちよく、そしてお得に打ち込めます。"}},quality:{focus:{result:[db.ksp_hopegaoka],reason:"「質」を重視して集中したいならここ。料金は高めですが、打席待ちもなく、黙々と自分のスイングと向き合える環境です。"},community:{result:[db["365_hikone"]],reason:"質の高い練習環境と、アットホームな雰囲気を両立したいあなたへ。親切な店員さんや工房に集まる人たちとの交流も魅力です。"},comfort:{result:[db["365_nagahama"]],reason:"最高の「質」と「快適さ」で打ち込みたいならここ。ショートコース、トップトレーサー、試打と、全てが揃っています。"}}},trial:{default:{default:{result:[db["365_nagahama"]],reason:"クラブを試したいなら、ゴルフパートナー併設で<strong>無料試打</strong>ができるここが唯一無二の選択肢です！トップトレーサーのデータを見ながら、あなたの予算感や求める雰囲気に合わせて、最高の1本を見つけてください！"}}}};

    function createLocationCard(location) {
        const features = [
            location.hasTracer ? '📡 弾道測定器' : '',
            location.hasApproach ? '⛳️ アプローチ' : '',
            location.hasBunker ? '🕳️ バンカー' : '',
            location.hasPutter ? '🏌️ パター' : '',
        ].filter(Boolean).join(' / ');

        let buttonsHTML = '';
        if (location.url) {
            buttonsHTML += `<div class="mt-4"><a href="${location.url}" target="_blank" class="inline-block bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700 transition-all duration-300">関のレビュー記事で詳しく見る！</a></div>`;
        }
        return `
            <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-sm" data-location-key="${location.key}">
                <h3 class="text-xl font-bold text-slate-800">${location.name}</h3>
                <p class="text-sm text-slate-500 mt-1">${features}</p>
                ${buttonsHTML}
            </div>
        `;
    }

    function renderLocationList() {
        if (!locationListContainer) return;

        const activeFilters = Array.from(filterControls.querySelectorAll('input:checked')).map(cb => cb.value);
        
        locationListContainer.innerHTML = '';
        Object.values(db).forEach(location => {
            const matches = activeFilters.every(filter => location[filter]);
            if (matches) {
                locationListContainer.innerHTML += createLocationCard(location);
            }
        });

        if (locationListContainer.innerHTML === '') {
            locationListContainer.innerHTML = `<p class="text-slate-500 text-center py-8">該当する練習場はありませんでした。</p>`;
        }
    }

    function renderHistoryList() {
        if (!historyListContainer) return;
        const history = JSON.parse(localStorage.getItem('diagnosisHistory')) || [];
        historyListContainer.innerHTML = '';

        if (history.length === 0) {
            historyListContainer.innerHTML = '<p class="text-slate-500">まだ診断履歴はありません。</p>';
            return;
        }

        history.forEach(item => {
            const card = document.createElement('div');
            card.className = 'bg-slate-50 p-4 rounded-lg border';
            const resultNames = item.recommendation.result.map(loc => loc.name).join('、');
            card.innerHTML = `
                <p class="text-sm text-slate-500">${item.date}</p>
                <div class="mt-2">
                    <p><strong>目的:</strong> ${item.inputs.goal}</p>
                    <p><strong>予算:</strong> ${item.inputs.budget}</p>
                    <p><strong>雰囲気:</strong> ${item.inputs.priority}</p>
                </div>
                <div class="mt-3 pt-3 border-t">
                    <p class="font-semibold"><strong>診断結果:</strong> <span class="text-red-600">${resultNames}</span></p>
                </div>
            `;
            historyListContainer.appendChild(card);
        });
    }

    function updateView(hash) {
        let activeHash = hash || window.location.hash.substring(1) || 'welcome';
        if(activeHash.startsWith('#')) activeHash = activeHash.substring(1);
        allTabLinks.forEach(link => link.classList.toggle('active', link.dataset.tab === activeHash));
        sections.forEach(section => section.classList.toggle('active', section.id === activeHash));
    }

    allTabLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            if (link.classList.contains('active')) {
                if (!link.getAttribute('href') || !link.getAttribute('href').startsWith('#')) {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
                return;
            }
            const tabName = link.dataset.tab;
            history.pushState(null, null, '#' + tabName);
            updateView(tabName);
            window.scrollTo(0, 0);
        });
    });
    
    pageScrollLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = link.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
    });

    if(filterControls) {
        filterControls.addEventListener('change', renderLocationList);
    }
    
    window.addEventListener('popstate', () => updateView());

    window.addEventListener('scroll', () => {
        bottomNav.classList.toggle('visible', window.scrollY > 200);
    });
    
    // --- チェックリストの読み込み・保存・PDF出力処理 ---
    
    // 1. 読み込み処理 (ページ表示時に一度だけ実行)
    checklistInputs.forEach(input => {
        const savedValue = localStorage.getItem(input.id);
        if (savedValue) {
            input.value = savedValue;
        }
    });

    // 2. 「内容を保存」ボタンの処理
    const saveButtons = document.querySelectorAll('.save-checklist-btn');
    saveButtons.forEach(button => {
        button.addEventListener('click', () => {
            const checklistId = button.dataset.checklistId;
            const targetChecklist = document.getElementById(checklistId);
            if (!targetChecklist) return;

            const inputsToSave = targetChecklist.querySelectorAll('input[type="text"], textarea');
            inputsToSave.forEach(input => {
                localStorage.setItem(input.id, input.value);
            });

            const feedbackMessage = button.parentElement.querySelector('.save-feedback');
            if (feedbackMessage) {
                feedbackMessage.style.display = 'inline';
                setTimeout(() => {
                    feedbackMessage.style.display = 'none';
                }, 2000);
            }
        });
    });

    // 3. 「PDFで出力」ボタンの処理
    let elementToPrint = null;
    const pdfButtons = document.querySelectorAll('.pdf-export-btn');
    pdfButtons.forEach(button => {
        button.addEventListener('click', () => {
            const checklistId = button.dataset.checklistId;
            elementToPrint = document.getElementById(checklistId);
            
            if(elementToPrint) {
                elementToPrint.classList.add('printable-area');
                window.print();
            }
        });
    });
    
    // 4. 印刷ダイアログが閉じた後の後処理
    window.addEventListener('afterprint', () => {
        if (elementToPrint) {
            elementToPrint.classList.remove('printable-area');
            elementToPrint = null;
        }
    });


    const generateBtn = document.getElementById('generate-report');
    if (generateBtn) {
        generateBtn.addEventListener('click', () => {
            const goal = document.getElementById('goal').value;
            const budget = document.getElementById('budget').value;
            const priority = document.getElementById('priority').value;

            if (!goal || !budget || !priority) { alert('すべての質問に答えてください！'); return; }

            document.getElementById('report-goal').textContent = document.querySelector(`#goal option[value='${goal}']`).textContent;
            document.getElementById('report-budget').textContent = document.querySelector(`#budget option[value='${budget}']`).textContent;
            document.getElementById('report-priority').textContent = document.querySelector(`#priority option[value='${priority}']`).textContent;

            const recommendation = (diagnosisLogic[goal]?.[budget]?.[priority]) || (diagnosisLogic[goal]?.[budget]?.default) || (diagnosisLogic[goal]?.default?.default);
            const recommendationContainer = document.getElementById('report-recommendation');
            recommendationContainer.innerHTML = '';

            if (recommendation && recommendation.result) {
                const formBaseUrl = 'https://docs.google.com/forms/d/e/1FAIpQLSddpgYmksMMN3HvdueS7bvvEW8qfCsZzdZl636lJXzjIE1u2A/viewform?usp=pp_url';
                const formEntryId = 'entry.1382914903';

                recommendation.result.forEach(location => {
                    const card = document.createElement('div');
                    card.className = 'bg-white p-4 rounded-lg border border-amber-300 shadow-sm';
                    const features = [
                        location.hasTracer ? '📡 弾道測定器' : '',
                        location.hasApproach ? '⛳️ アプローチ' : '',
                        location.hasBunker ? '🕳️ バンカー' : '',
                        location.hasPutter ? '🏌️ パター' : '',
                    ].filter(Boolean).join(' / ');

                    let content = `<h5 class="text-xl font-bold text-red-600">${location.name}</h5><p class="text-sm text-slate-500 mt-1">${features}</p>`;
                    if (recommendation.result.length === 1) {
                        content += `<p class="mt-2 text-sm text-slate-700">${recommendation.reason}</p>`;
                    }
                    if(location.url) {
                        content += `<div class="mt-4 text-center"><a href="${location.url}" target="_blank" class="inline-block bg-white text-green-700 font-bold py-2 px-4 rounded-lg border-2 border-green-600 hover:bg-green-600 hover:text-white transition-all duration-300">関のレビュー記事で詳しく見る！</a></div>`;
                    }
                    
                    const prefilledUrl = `${formBaseUrl}&${formEntryId}=${encodeURIComponent(location.name)}`;
                    content += `<div class="mt-3 text-center"><a href="${prefilledUrl}" target="_blank" class="inline-block text-sm text-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-100 transition-all duration-300">この練習場のレビューを投稿する</a></div>`;
                    
                    card.innerHTML = content;
                    recommendationContainer.appendChild(card);
                });

                if(recommendation.result.length > 1) {
                    const reasonPara = document.createElement('p');
                    reasonPara.className = 'mt-4 text-sm text-slate-700';
                    reasonPara.innerHTML = '<strong>理由：</strong>' + recommendation.reason;
                    recommendationContainer.appendChild(reasonPara);
                }

                const history = JSON.parse(localStorage.getItem('diagnosisHistory')) || [];
                const newHistoryItem = {
                    date: new Date().toLocaleString('ja-JP'),
                    inputs: {
                        goal: document.querySelector(`#goal option[value='${goal}']`).textContent,
                        budget: document.querySelector(`#budget option[value='${budget}']`).textContent,
                        priority: document.querySelector(`#priority option[value='${priority}']`).textContent
                    },
                    recommendation: recommendation
                };
                history.unshift(newHistoryItem);
                localStorage.setItem('diagnosisHistory', JSON.stringify(history.slice(0, 50))); 
                renderHistoryList();
            }

            document.getElementById('report-output').style.display = 'block';
            document.getElementById('report-output').scrollIntoView({ behavior: 'smooth' });
        });
    }
    
    updateView();
    renderLocationList();
    renderHistoryList();
});
</script>

</body>
</html>
